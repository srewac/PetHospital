{% extends 'backend/base_page.html' %}
{% block title %}
    病例详情
{% endblock %}
{% block main_content %}
    <style>
        .mask {
            background: rgba(52, 52, 52, 0.5);
            position: absolute;
            top: 0;
            z-index: 99;
            display: none
        }

        .image {
            width: 150px;
            height: 150px;
        }

        .box {
            position: relative;
            float: left;
            width: 150px;
            margin-right: 15px;
            margin-bottom: 10px;
            margin-top: 10px;
        }

        .box:hover .mask {
            display: block;
        }

        .box:hover button {
            width: 120px;
            height: 40px;
            display: block;
            margin: 50px auto;
        }


    </style>
    <script>
    </script>
    <div id="page-wrapper">
    <div class="row">
        <div class="col-lg-11">
            <h1 class="page-header"><a href="{% url 'Manage:disease_example_show' %}">病例管理</a>/病例详情
            </h1>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-l2">
            <div class="panel-body">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        病例详情
                    </div>
                    <!-- /.panel-heading -->
                    <div class="panel-body">
                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs">
                            <li class="active" id="{{ disease_example.name }}">
                                <a href="#{{ disease_example.name }}" data-toggle="tab">病例详情</a>
                            </li>
                            {% for process in disease_example.process_set.all %}
                                <li>
                                    <a href="#{{ process.id }}" data-toggle="tab">{{ process.name }}</a>
                                </li>
                            {% endfor %}
                        </ul>
                        <!-- Tab panes -->
                        <div class="tab-content">
                            <div class="tab-pane fade in active" id="{{ disease_example.name }}">
                                <h4>病例名称：</h4>
                                <p>{{ disease_example.name }}</p>
                                <h4>所属病大类：</h4>
                                <p>{{ disease_example.sub_disease.disease }}</p>
                                <h4>所属病小类：</h4
                                >
                                <p>{{ disease_example.sub_disease }}</p>
                                <h4>所属病小类描述：</h4>
                                <p>{{ disease_example.sub_disease.desc }}</p>
                            </div>

                            {% for process in disease_example.process_set.all %}
                                <div class="tab-pane fade" id="{{ process.id }}" style="margin-top:5px;">
                                    <div style="display: inline;">
                                        <span style="font-size: 20px;"><b>描述</b></span>
                                        <button class="btn btn-warning" style="margin-left: 10px;margin-bottom: 5px;">
                                            修改
                                        </button>
                                    </div>
                                    <p>{{ process.desc }}</p>
                                    <div style="display: inline;">
                                        <span style="font-size: 20px;"><b>图片</b></span>
                                    </div>
                                    <div style="overflow: auto;">
                                        {% for pic in process.picture_set.all %}
                                            <div class="box">
                                                <div class="image">
                                                    <img id="pic_{{ pic.id }}"
                                                         src="{{ STATIC_URL }}{{ pic.pic_url }}"
                                                         height="150px"
                                                         width="150px" alt="{{ pic.id }}"/>
                                                </div>
                                                <div class="mask" style="width: 150px;height: 150px;">
                                                    <button class="btn btn-danger">
                                                        删除图片
                                                    </button>
                                                </div>
                                            </div>
                                        {% endfor %}
                                        <div class="box">
                                            <div class="image">
                                                <img id="video_add"
                                                     src="{{ STATIC_URL }}images/upload.png" height="150px"
                                                     width="150px" alt="上传"/>
                                            </div>
                                        </div>

                                    </div>
                                    <div style="display: inline;">
                                        <span style="font-size: 20px;"><b>视频</b></span>
                                    </div>
                                    {% if not process.video_set.all %}
                                        <p>无视频</p>
                                    {% endif %}
                                    <div style="overflow: auto">
                                        {% for video in process.video_set.all %}
                                            <div class="box" style="margin-top:0">
                                                <div class="image">
                                                    <video width="150px" height="150px"
                                                           src="{{ STATIC_URL }}{{ video.video_url }}"
                                                           controls="controls"
                                                           id="video_{{ video.id }}"></video>
                                                </div>
                                                <div class="mask"
                                                     style="width: 150px;height: 100px;background: rgba(52, 52, 52, 0)">
                                                    <button class="btn btn-danger">
                                                        删除视频
                                                    </button>
                                                </div>
                                            </div>
                                        {% endfor %}
                                        <div class="box" style="margin-top:0">
                                            <div class="image">
                                                <img id="video_add"
                                                     src="{{ STATIC_URL }}images/upload.png" height="100px"
                                                     width="100px" alt="上传" style="margin-top:25px"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                        <!-- /.panel-body -->
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block datatable_script %}
    <script></script>
{% endblock %}